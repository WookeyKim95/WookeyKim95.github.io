---
layout: post
title:  "[WinAPI Project] BNB 제작 일지"
subtitle: 
date: 2022-10-19 16:19:09 +0900
categories: project
tags:
comments: true
related_posts:

---
# [WinAPI Project] BNB 제작 일지<br/>

개발기간 : 10월 18일 ~ 11월 24일 (예정)<br/>
<Br/>

[개발 일정표 노션 링크](https://small-fairy-d44.notion.site/0e7da7a478a8425484162dbd15138ee3?v=15d21b2d0372477ebe6de7f9cd129443)<br/>
<Br/>

## 10월 18일<br/>
<Br/>

게임 구성을 위해서 필요한 매니저와 엔진의 구조를 구상하였다.<br/>

본격적인 개발에 들어가기에 앞선 전 단계, 즉 OutputFile경로와 미리 컴파일된 헤더로 사용될 pch파일, 그리고 사용자 지정함수, 지정 자료구조를 만들어 주었다.<br/>

ex) Vec2 : 2차원 벡터를 저장하기 위한 자료구조이다.<br/>
<Br/>

## 10월 19일<br/>
<br/>

본격적인 게임 구성을 위한 엔진과 매니저 설계를 완료하였다.

BnB에서 구성한 매니저는 아래와 같다.

- Engine : 게임이 돌아가기 위한 코어. 각 매니저들을 init하고 프레임마다의 논리계산, 렌더링을 진행하도록 유도한다.

<Br/>

- KeyMgr : 게임 내 에서 키의 상태를 정의하기 위한 매니저이다.
	+ 게임에서 눌리는 키를 정의한다.
	+ 현재 해당 윈도우를 가리키고 있을 경우 이전에 눌렸는지 아닌지 여부, 그리고 현재 논리 연산단계(tick)에서 눌렸는지 아닌지 여부에 따라서 tap, released, pressed 상태인지를 정의하고 판별한다.
	+ 현재 해당 윈도우를 가리키고 있지 않은 경우 released로 키를 해제한다.

<br/>

- TimeMgr : 1프레임이 진행된 시간과 1초당 진행된 프레임 수를 측정하기 위한 장치이다. 여기서 측정된 값을 매크로를 통해서 뽑아내서 1초 당 일정한 속도로 이동할 수 있도록 조절한다.<br/> 이 매니저가 없으면 컴퓨터 성능에 따라서 1초당 프레임이 달라지므로 이동 속도 등이 달라지게 된다.

<br/>

- LevelMgr : 어떤 레벨(스테이지 및 에디터 상태 등)이 있는지를 관리하고 1프레임 당 연산과 렌더링을 관할한다.

<br/>

- CollisionMgr : 충돌을 관리한다. 객체로 구현된 Collider가 어떤 상태이어야 충돌로 처리할지, 비충돌로 처리할지를 관할한다.

<br/>

- EventMgr : Level에서 발생하는 이벤트들을 관할한다. 삭제 예정인 오브젝트를 먼저 삭제하고, 그 다음에 순차적으로 들어오는 이벤트르 들을 종류에 따라서 처리한다.

- PathMgr : 리소스, 텍스쳐의 저장경로를 관할한다. 절대경로가 아니라 상대 경로를 이용하도록 돕는다.

- ResMgr : 객체가 어떤 리소스나 텍스쳐를 이용할지 관할한다. PathMgr의 도움을 받아 상대경로를 찾아서 객체에게 텍스쳐를 넘긴다.

- UIMgr : 게임 내의 UI를 관할한다. 이때, 인벤토리와 같은 경우처럼 부모 UI - 자식 UI의 관계를 가지는 경우가 있는데 어떤 UI가 클릭되었는지를 구분할 때 bfs알고리즘을 사용한다.

- SoundMgr : Bgm 재생을 관할한다. 0~100까지 %단위를 사용하여 어디서 재생할지를 결정할 수 있다.

<br/>

## 10월 20일<br/>
<br/>

코딩보다는 리소스 작업에 집중했다.<br/>

리소스를 받아서 png파일을 bmp파일로 바꾸고 투명화를 위한 색깔인 마젠타(255, 0, 255)를 배경에 넣는 작업을 진행하였다.<br/>

그리고 매니저의 구조와 Tile객체를 다시 공부하면서 필요하다면 어떻게 재구성할지를 고민하고자 한다.<br/>

<br/>

![에디터 기본 화면](https://github.com/WookeyKim95/WookeyKim95.github.io/blob/main/assets/img/project/bnb_1.png?raw=true)

<br/>

Eidtor의 기본 화면을 위와 같이 화면을 구성하는데 성공하였다.<br/>

앞으로의 목표는 아래와 같다.

- 타일 별로 텍스쳐를 다르게 저장할 수 있게 구현하기
- 타일 맵 저장, 로드 구현하기

**계속 업데이트 중 입니다.**